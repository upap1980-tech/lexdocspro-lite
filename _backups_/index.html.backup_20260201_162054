<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexDocsPro LITE v2.0</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š LexDocsPro LITE <span class="version">v2.0</span></h1>
            <p>Gestor de Documentos Legales con IA Multi-Proveedor</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('consulta')">ğŸ’¬ Consultas</button>
            <button class="tab-btn" onclick="switchTab('documentos')">ğŸ“ Generar Documentos</button>
            <button class="tab-btn" onclick="switchTab('lexnet')">âš–ï¸ Analizador LexNET</button>
        </div>

        <!-- TAB 1: CONSULTAS -->
        <div id="tab-consulta" class="tab-content active">
            <div class="main-layout">
                <div class="panel explorer">
                    <h2>ğŸ“ Expedientes</h2>
                    <div id="currentPath" class="path"></div>
                    <div id="fileTree" class="file-tree"></div>
                    <button onclick="refreshFiles()" class="btn-refresh">ğŸ”„ Refrescar</button>
                </div>
                <div class="panel viewer">
                    <h2>ğŸ“„ Documento</h2>
                    <div id="pdfViewer" class="pdf-container">
                        <p class="placeholder">Selecciona un PDF para visualizar</p>
                    </div>
                    <button id="btnOCR" onclick="runOCR()" class="btn-ocr" disabled>ğŸ” Ejecutar OCR</button>
                </div>
                <div class="panel chat">
                    <h2>ğŸ’¬ Asistente IA</h2>
                    <div class="ai-controls">
                        <select id="aiProvider" class="select-provider"><option value="">Cargando...</option></select>
                        <select id="aiMode" class="select-mode">
                            <option value="standard">âš¡ Consulta RÃ¡pida</option>
                            <option value="deep">ğŸ” AnÃ¡lisis Profundo</option>
                            <option value="research">ğŸ“š InvestigaciÃ³n</option>
                        </select>
                    </div>
                    <div id="chatMessages" class="chat-messages"></div>
                    <div class="chat-input">
                        <textarea id="chatPrompt" placeholder="Escribe tu consulta legal..." rows="3"></textarea>
                        <button onclick="sendMessage()" class="btn-send">Enviar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: GENERADOR DE DOCUMENTOS -->
        <div id="tab-documentos" class="tab-content">
            <div class="doc-generator">
                <div class="doc-sidebar">
                    <h2>ğŸ“‹ Tipo de Documento</h2>
                    <div id="docTypes" class="doc-types"></div>
                </div>
                <div class="doc-form">
                    <h2 id="docFormTitle">Selecciona un tipo de documento</h2>
                    <p id="docFormDesc" class="doc-description"></p>
                    <form id="documentForm" class="hidden">
                        <div id="formFields"></div>
                        <div class="form-actions">
                            <select id="docProvider" class="select-provider"><option value="ollama">Ollama</option></select>
                            <button type="button" onclick="generateDocument()" class="btn-generate">âœ¨ Generar Documento</button>
                        </div>
                    </form>
                    <div id="generatedDoc" class="generated-doc hidden">
                        <h3>ğŸ“„ Documento Generado</h3>
                        <div class="doc-actions">
                            <button onclick="copyDocument()" class="btn-copy">ğŸ“‹ Copiar</button>
                            <button onclick="downloadDocument()" class="btn-download">ğŸ’¾ Descargar</button>
                            <button onclick="resetGenerator()" class="btn-reset">ğŸ”„ Nuevo</button>
                        </div>
                        <pre id="docContent" class="doc-content"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: ANALIZADOR LEXNET -->
        <div id="tab-lexnet" class="tab-content">
            <div class="lexnet-analyzer">
                <div class="lexnet-upload">
                    <h2>ğŸ“¤ Subir Documentos</h2>
                    <p class="lexnet-instructions">
                        Sube uno o mÃ¡s archivos PDF/imÃ¡genes. MÃ­nimo 1 archivo requerido.
                    </p>
                    
                    <div class="upload-zone-simple" onclick="document.getElementById('filesMultiple').click()">
                        <div class="upload-icon-big">ğŸ“</div>
                        <p class="upload-prompt"><strong>Haz clic para seleccionar archivos</strong></p>
                        <p class="upload-hint">PDF, JPG, PNG, DOCX... | Uno o varios archivos</p>
                        <input type="file" id="filesMultiple" multiple accept="*/*" onchange="handleMultipleFilesLexNet()" style="display: none;">
                    </div>
                    
                    <div class="files-list-simple" id="filesListLexNet"></div>
                    
                    <div class="lexnet-controls">
                        <select id="lexnetProvider" class="select-provider"><option value="ollama">ğŸ  Ollama</option></select>
                        <button onclick="analyzeLexNetMultiple()" class="btn-analyze" id="btnAnalyzeLexNet" disabled>
                            ğŸ” Analizar NotificaciÃ³n
                        </button>
                    </div>
                </div>
                
                <div class="lexnet-result">
                    <h2>ğŸ“Š AnÃ¡lisis LexNET</h2>
                    <div id="lexnetContent" class="lexnet-content">
                        <p class="placeholder">Sube al menos 1 documento y presiona "Analizar NotificaciÃ³n"</p>
                    </div>
                    <div class="lexnet-actions hidden" id="lexnetActions">
                        <button onclick="copyLexNetAnalysis()" class="btn-copy">ğŸ“‹ Copiar</button>
                        <button onclick="downloadLexNetAnalysis()" class="btn-download">ğŸ’¾ Descargar TXT</button>
                        <button onclick="resetLexNetMultiple()" class="btn-reset">ğŸ”„ Nuevo</button>
                    </div>
                </div>
            </div>
        </div>

        <footer><span id="status">Listo</span></footer>
    </div>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
